<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Bitcoin-price-es7 by nathanhleung</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  </head>
  <body>
    <div class="container">
      <p>
        The current Bitcoin price is: 
      </p>
      <pre id="rate">Loading...</pre>
    </div>
    <script type="text/babel">
      // We can only use await inside of an async function, so we'll create an IIFE
      (async () => {
      	const response = await fetch('https://apiv2.bitcoinaverage.com/constants/exchangerates/global');
        // response.json() returns a promise, which we can await
        const json = await response.json();
        const rate = json.rates.BTC.rate ** -1;
        document.getElementById('rate').innerHTML = '$' + (Math.round(rate * 100) / 100).toString();
      })();
    </script>
    <!-- Promise polyfill needed for IE11 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es6-promise/3.2.2/es6-promise.min.js"></script>
    <!-- Fetch polyfill needed for Safari/IE11 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/6.9.1/polyfill.min.js"></script>
  </body>
</html>
